# Prefixes

PREFIX wd: <https://catalog.digital-scriptorium.org/entity/>
PREFIX wds: <https://catalog.digital-scriptorium.org/entity/statement/>
PREFIX wdv: <https://catalog.digital-scriptorium.org/value/>
PREFIX wdt: <https://catalog.digital-scriptorium.org/prop/direct/>
PREFIX p: <https://catalog.digital-scriptorium.org/prop/>
PREFIX ps: <https://catalog.digital-scriptorium.org/prop/statement/>
PREFIX pq: <https://catalog.digital-scriptorium.org/prop/qualifier/>

PREFIX schema: <http://schema.org/>
PREFIX wikibase: <http://wikiba.se/ontology#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>

# find manuscript record associated with name "X"
SELECT ?record ?recordLabel ?nameString ?name ?nameLabel ?role ?roleLabel ?DSID ?wdQID
WHERE {
# bind query variables
  BIND(p:P14 AS ?nameAsRecordedStatement).
  BIND(ps:P14 As ?nameAsRecorded).
  BIND(pq:P17 AS ?hasName).
  BIND(pq:P15 AS ?hasRole).
  BIND(wdt:P16 AS ?instanceOf).
  BIND(wdt:P1 AS ?hasDSID).
 # BIND(wd:Q434 AS ?name).
# statement: manuscript record has statement for name
  ?record ?nameAsRecordedStatement ?nameStatement .
# statement: name statement has name object recorded as string value
  ?nameStatement ?nameAsRecorded ?nameString .
# statement: name statement has qualifier for structured/authority value
  ?nameStatement ?hasName ?name .
# statement: name statement has qualifier for role value
  ?nameStatement ?hasRole ?role .
# statement: authority value has DSID
  ?name ?hasDSID ?DSID .
# # statement: authority value occurs in personal or corporate wikibase name authority 
 ?name ?instanceOf wd:Q9 .
 ?name wdt:P42 ?wdQID .
  SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE]". }
  }
